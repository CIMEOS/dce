.. include:: ../Includes.txt

.. _users-manual-detailpage:


Detail page
-----------

The detail page can be used to display the fields of the DCE in another manner. For example, if you have many fields
defined for your DCE you can display the most important fields with the normal template
and the complete amount of fields with the detail template.

The decision to display either the normal template or the detail page template is done by detecting the
**detail page identifier** (GET parameter). If it is found and it contains the ``uid`` of the actually shown DCE, the
content is rendered with the detail page template otherwise the normal template is used.

.. image:: Images/detail-page.png
   :alt: DCE detail page template and trigger


.. important::
   When detail page template rendering is triggered, this has no effect on other content elements on the current page!


Enable detail page
^^^^^^^^^^^^^^^^^^

To enable the functionality for using a detail page you have to check this option.

Detail page identifier (get parameter)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

This is the parameter which must be used in the GET parameter of the URL to enable the display of the detail page.
The value of this GET parameter must be the ``uid`` of the displayed content object, to trigger the detail page template.

You should avoid using a parameter name, which is already in use, like "id", "type" or "L".

.. _users-manual-detailpage-slug-expression:

Slug expression
^^^^^^^^^^^^^^^

Since DCE 2.6.0 a detail page can have a beautiful URL, thanks to TYPO3's routing enhancer. This slug expression field
controls how the slug is being build. You can choose a single field or multiple, thanks to Symfony's expression language.

.. note::
   A registered :ref:`routing enhancer configuration <additional-informations-detail-pages-with-slugs-installation>` is required, to use this feature.

When you have e.g. a field with variable "title", you can simply enter ``title``.
Then the value of this field is used for slug generation.

To combine multiple fields for slug generation you can use expressions like this:

::

    firstName ~ ' ' ~ lastName


Also the whole DCE object and the row of tt_content item is also available:

::

    dce.getTitle() ~ ' ' ~ contentObject['uid']


.. note::
   All slugs generated by DCE are sanitized. The only chars allowed are ``a-z``, ``0-9`` and ``-``.
   All other chars, get replaced by dash ``-``. Double dashes are trimmed to one dash.

.. tip::
   It's recommended, to use spaces instead of dashes, when concat several fields for slug.
   Then, the expression can get used for page title rendering as well.



There is a dedicated chapter for this, checkout
:ref:`Detail pages with slugs <additional-informations-detail-pages-with-slugs>`.

.. _users-manual-detailpage-slug-title:

Use slug expression as page title
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

With this option enabled, the current page title gets modified, based on the given slug expression.
In opposite to slugs itself, generated DCE detail page titles are not sanitized (e.g. convert spaces to dashes).

**You can choose between four options:**

1. No, keep title as it is (default)
2. Yes, overwrite the current page title
3. Yes, prepend slug content to current page title
4. Yes, append slug content to current page title

When selecting "prepend" (3) or "append" (4), the generated DCE detail page title gets separated by a configurable
string. By default it separates the DCE and the page title by ``' - '``.

You can configure this by TypoScript, this is the default configuration DCE ships:

::

    config.pageTitleProviders.dce {
        prependWrap = || - |
        appendWrap = | - ||
    }

Those values are used in a stdWrap `noTrimWrap <https://docs.typo3.org/m/typo3/reference-typoscript/master/en-us/Functions/Stdwrap.html#notrimwrap>`_
function.


Template type
^^^^^^^^^^^^^

Like the *normal* template you can choose between the inline template code and using a template file.

Detail page template (fluid)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Using the inline template type you have to insert the template code in the same manner as for the normal template.


How to create a link to detail template
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In your "normal" template you probably want a link, to trigger the detail template for this content element.
Actually, it is pretty easy to create such a link in Fluid template:

.. code-block:: html

    <f:link.page additionalParams="{detailDceUid:contentObject.uid}">
        Show detail template of this content element
    </f:link.page>

.. note::
   It is not possible to activate two content element detail pages at once.


Hide other content elements
~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. tip::
   Since DCE 2.3, with enabled DCE container feature, you can automatically hide all other container items.
   Check out the option, **"Hide other container items, when detail page is triggered"** in :ref:`DCE Container options <users-manual-dcecontainer-hide-other-content-elements>`.
   This checkbox is only available, when DCE container **and** detail page features are enabled.

If you have more DCEs with detail templates on one page, the template will just switch for one of your content elements.
The other DCE will still be visible and displays the normal template.

When you want to hide all other content elements you need to do some typoscript.


Fluid Styled Content
====================

.. code-block:: typoscript

    [request.getQueryParams()['detailDceUid'] > 0]
        styles.content.get.select.uidInList {
            data = GP:detailDceUid
            intval = 1
        }
    [end]

This small snippet checks if the GET param "detailDceUid" is set. If it is set, it tells the select function in
CSS Styled content, to display just this one content element, by passing the GET parameter value to the query.

Of course, we need to avoid SQL injection, by casting the value to an integer by using (stdWrap.)intval.

This example removes all content element from normal column. If you want to remove all elements but the selected one in
another col, you just need to write eg. "styles.content.getLeft" or ".getRight" or ".getBorder".

**Caution:** This snippet will probably not work, because mostly TYPO3 Integrators uses this
to assign the contents to the template:

::

    page.10 < styles.content.get

The lower than sign (``<``) copies the given value. But with our snippet above we override the original one.
The copy will not be affected. The easiest way would be to use a reference instead:

::

    page.10 =< styles.content.get


Then you are able to change something in CSS Styled Content typoscript, which also affects the output.


Bootstrap Package
=================

In Bootstrap Package fetching content elements happens a bit different. Here, lib.dynamicContent is utilized by
the f:cObject view helper from within the templates, so we modify this lib:

.. code-block:: typoscript

    [request.getQueryParams()['detailDceUid'] > 0]
        lib.dynamicContent.20.select.uidInList {
     		override.cObject = TEXT
     		override.cObject.data = GP:detailDceUid
     		override.cObject.intval = 1
     		override.if {
     			value.data = register:colPos
    			equals = 0
     		}
        }
    [end]
